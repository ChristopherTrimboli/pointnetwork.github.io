"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[850],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return h}});var o=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=o.createContext({}),s=function(e){var t=o.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=s(e.components);return o.createElement(p.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,p=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),u=s(n),h=a,k=u["".concat(p,".").concat(h)]||u[h]||c[h]||r;return n?o.createElement(k,i(i({ref:t},d),{},{components:n})):o.createElement(k,i({ref:t},d))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=u;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var s=2;s<r;s++)i[s]=n[s];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},64954:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return p},metadata:function(){return s},toc:function(){return d},default:function(){return u}});var o=n(83117),a=n(80102),r=(n(67294),n(3905)),i=["components"],l={id:"build-zapp-dev-environment-direct-install",title:"Setup Zapp Development Environment (without Docker)",sidebar_label:"Zapp Development Environment (without Docker)",slug:"../build-zapp-dev-environment-direct-install"},p=void 0,s={unversionedId:"build/build-zapp-dev-environment-direct-install",id:"build/build-zapp-dev-environment-direct-install",title:"Setup Zapp Development Environment (without Docker)",description:"You need to install NVM, Node JS, Arlocal and Ganache-CLI as dependent services for Point Node to use.",source:"@site/docs/build/build-zapp-dev-environment-direct-install.md",sourceDirName:"build",slug:"/build-zapp-dev-environment-direct-install",permalink:"/docs/build-zapp-dev-environment-direct-install",editUrl:"https://github.com/pointnetwork/pointnetwork.github.io/edit/main/website/docs/build/build-zapp-dev-environment-direct-install.md",tags:[],version:"current",lastUpdatedBy:"Darren Jensen",lastUpdatedAt:1651202537,formattedLastUpdatedAt:"4/29/2022",frontMatter:{id:"build-zapp-dev-environment-direct-install",title:"Setup Zapp Development Environment (without Docker)",sidebar_label:"Zapp Development Environment (without Docker)",slug:"../build-zapp-dev-environment-direct-install"},sidebar:"pnSidebar",previous:{title:"Zapp Development Environment using Docker",permalink:"/docs/build-zapp-dev-environment-docker"},next:{title:"Point Network Zapp Developers Guide",permalink:"/docs/build-zapp-developer-guide"}},d=[{value:"Install NVM",id:"install-nvm",children:[],level:2},{value:"Install Node JS",id:"install-node-js",children:[],level:2},{value:"Install Arlocal",id:"install-arlocal",children:[],level:2},{value:"Install Ganache CLI",id:"install-ganache-cli",children:[],level:2},{value:"Deploy Point Contracts",id:"deploy-point-contracts",children:[],level:2},{value:"Run the Owner Point Node and deploy an example Zapp",id:"run-the-owner-point-node-and-deploy-an-example-zapp",children:[],level:2},{value:"Run the Visitor Point Node",id:"run-the-visitor-point-node",children:[],level:2}],c={toc:d};function u(e){var t=e.components,n=(0,a.Z)(e,i);return(0,r.kt)("wrapper",(0,o.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"You need to install NVM, Node JS, Arlocal and Ganache-CLI as dependent services for Point Node to use."),(0,r.kt)("h2",{id:"install-nvm"},"Install NVM"),(0,r.kt)("p",null,"Follow the instructions on the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/nvm-sh/nvm"},"NVM repo")," for your platform."),(0,r.kt)("h2",{id:"install-node-js"},"Install Node JS"),(0,r.kt)("p",null,"With NVM installed and setup you are now ready to install Node JS as follows:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"nvm use 14\n")),(0,r.kt)("p",null,"The Point Node repo makes use of an ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/pointnetwork/pointnetwork/blob/develop/.nvmrc"},".nvmrc file")," which can be recognised by your terminal to automatically switch to the correct version of Node using NVM."),(0,r.kt)("p",null,"If you are using ZSH terminal then follow ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/nvm-sh/nvm#zsh"},"these instructions")," to add support to switch to the correct Node version automatically. "),(0,r.kt)("h2",{id:"install-arlocal"},"Install Arlocal"),(0,r.kt)("p",null,"To install and start Arlocal:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Clone the ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/textury/arlocal"},"Arlocal")," repo"),(0,r.kt)("li",{parentName:"ol"},"Run ",(0,r.kt)("inlineCode",{parentName:"li"},"npx arlocal@1.1.30"))),(0,r.kt)("h2",{id:"install-ganache-cli"},"Install Ganache CLI"),(0,r.kt)("p",null,"To install and start Ganache blockchain using Ganache CLI:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Install globally via npm: ",(0,r.kt)("inlineCode",{parentName:"li"},"npm i -g ganache-cli")),(0,r.kt)("li",{parentName:"ol"},"Start Ganache blockchain on port 7545 including a specific prefunded account: ")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"ganache-cli -v -p 7545 -i 256 --keepAliveTimeout 20000 \\\n  --account 0x011967d88c6b79116bb879d4c2bc2c3caa23569edd85dfe0bc596846837bbc8e,0x56bc75e2d63100000 \\\n  --account 0x22a316b515a68d4851087571bd5ff051f5ec3f13b28997fb80a8de055052514e,0x56bc75e2d63100000\n")),(0,r.kt)("h2",{id:"deploy-point-contracts"},"Deploy Point Contracts"),(0,r.kt)("p",null,"To deploy the Point Contracts:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"source .bash_alias\ncd hardhat\nrm -rf cache\nrm -rf typechain\nnpm i\nnpx hardhat compile\nnpm start\n")),(0,r.kt)("h1",{id:"setup-local-point-node-config"},"Setup Local Point Node Config"),(0,r.kt)("p",null,"Create a new profile directory on your local machine for ",(0,r.kt)("inlineCode",{parentName:"p"},"devlocal"),". This is the profile that you can use for running the dev Point Node directly on your own computer without using Docker. This folder can be wherever you like. In this tutorial we will create the profile under ",(0,r.kt)("inlineCode",{parentName:"p"},"~/workspace/pn/devlocal"),". "),(0,r.kt)("p",null,"Run the ",(0,r.kt)("inlineCode",{parentName:"p"},"mkdir")," command below which will create the folders shown:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"mkdir -p ~/workspace/pn/devlocal/keystore\n")),(0,r.kt)("p",null,"Copy the dev wallet key and arweave key from the pointnetwork repository into the ",(0,r.kt)("inlineCode",{parentName:"p"},"keystore")," directory that you created in the previous step."),(0,r.kt)("p",null,"Run the ",(0,r.kt)("inlineCode",{parentName:"p"},"cp")," command below. This assumes that you are currently in the cloned pointnetwork repository folder and you have already created the 'keystore' folder in the location specified earlier. Feel free to change this according to your system:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"cp resources/blockchain-test-key.json ~/workspace/pn/devlocal/keystore/key.json\ncp resources/arweave-test-key.json ~/workspace/pn/devlocal/keystore/arweave.json\n")),(0,r.kt)("p",null,"Create a ",(0,r.kt)("inlineCode",{parentName:"p"},"devlocal.yaml")," config file and save it in the pointnetwork repo ",(0,r.kt)("inlineCode",{parentName:"p"},"config")," directory. NOTE: This file is ignored by the ",(0,r.kt)("inlineCode",{parentName:"p"},"gitignore")," file automatically so do not commit this!"),(0,r.kt)("p",null,"Below is an example, You would only need to change ",(0,r.kt)("inlineCode",{parentName:"p"},"datadir")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"wallet.keystore_path")," values if you have created your profile in a different directory to what is specified:"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"NOTE"),": You may need to replace the tilde (~) in the directory path below and expand that to the full path, so on a Mac this would be ",(0,r.kt)("inlineCode",{parentName:"p"},"/Users/YOUR_USERNAME/pn/devlocal")," etc."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"NOTE"),": You can change ",(0,r.kt)("inlineCode",{parentName:"p"},"zappsdir")," to any directory on your computer so that it points to the location where you have all your own personal Zapps that you are developing."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"datadir: ~/workspace/pn/devlocal\nzappsdir: ../zapps\nwallet:\n  keystore_path: ~/workspace/pn/devlocal/keystore\nmode: zappdev\nlog:\n  sendLogs: false\n  level: debug\nstorage:\n  arweave_host: localhost\n  arweave_protocol: http\n  arweave_port: 1984\n  use_arweave_bundler: false\n  use_arlocal: true\n  arweave_gateway_url: http://localhost:1984/graphql\nnetwork:\n  web3: http://localhost:7545\napi:\n  address: 127.0.0.1\n  port: 24681\nzproxy:\n  host: 127.0.0.1\n  port: 65501\n")),(0,r.kt)("p",null,"Ensure that you have loaded the alias commands into your current terminal session."),(0,r.kt)("p",null,"Run the following command from the root of the cloned pointnetwork repo:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"source .bash_alias\n")),(0,r.kt)("p",null,"Create a profile in Firefox called ",(0,r.kt)("inlineCode",{parentName:"p"},"pointnetwork")," that has a proxy set to route all http / https traffic to ",(0,r.kt)("inlineCode",{parentName:"p"},"localhost:8666"),". Don't forget to add the ",(0,r.kt)("a",{parentName:"p",href:"/docs/build-zapp-dev-environment-docker#create-a-point-network-profile-in-firefox"},"Point Network CA certificate")," to the new profile in Firefox. "),(0,r.kt)("h2",{id:"run-the-owner-point-node-and-deploy-an-example-zapp"},"Run the Owner Point Node and deploy an example Zapp"),(0,r.kt)("p",null,"The above setup steps only need to be performed once. Going forward you can start a Point Node using:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"npm i\nnpm run build\npoint-dev\n")),(0,r.kt)("p",null,"Point Network Example Zapps live in their own separate repo called ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/pointnetwork/zapps"},"Zapps"),". Clone this repo to any location you like on your computer and proceed with the instructions below. In this tutorial we will assume that you have cloned the Zapps repo to a folder ",(0,r.kt)("strong",{parentName:"p"},"one level below pointnetwork")," repo. If you want to clone to a different location that is fine - you just need to change the relative paths below to your path."),(0,r.kt)("p",null,"You can deploy a Zapp from the cloned ",(0,r.kt)("inlineCode",{parentName:"p"},"zapps")," folder. So from the pointnetwork repo folder run the following to deploy blog.point that is in the cloned zapps repo folder one level below:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"point-deploy ../zapps/blog.point --contracts\n")),(0,r.kt)("p",null,"Open a local Point Browser that connects to the Point Node proxy (which is running on port 8666)."),(0,r.kt)("p",null,"NOTE: This has to be run from within the cloned ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/pointnetwork/pointsdk"},"PointSDK repo")," folder which you will have already setup according to the instructions ",(0,r.kt)("a",{parentName:"p",href:"/docs/build-zapp-dev-environment-docker#create-a-point-network-profile-in-firefox"},"here"),"."),(0,r.kt)("p",null,"Run the command below which assumes that you already have created the ",(0,r.kt)("inlineCode",{parentName:"p"},"pointnetwork")," profile as stated earlier:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"point-browser\n")),(0,r.kt)("h1",{id:"optional-run-a-second-point-node-to-simulate-a-visitor"},"(Optional) Run a second Point Node to simulate a Visitor"),(0,r.kt)("p",null,"To simulate having more than one Identity on the Network and to be able to interact with both Identities, it is necessary to create a new profile and start a separate instance of the Point Node using this new profile. This is especially useful when developing Zapps such as ",(0,r.kt)("inlineCode",{parentName:"p"},"email.point")," which require direct interaction between two identities (sending emails). "),(0,r.kt)("p",null,"Create a new profile directory on your local machine for ",(0,r.kt)("inlineCode",{parentName:"p"},"visitlocal"),". This is the profile that you can use for running the dev Point Node as a second visitor Identity. This folder can be wherever you like. In this tutorial we will create the profile under ",(0,r.kt)("inlineCode",{parentName:"p"},"~/workspace/pn/visitlocal"),". "),(0,r.kt)("p",null,"Run the ",(0,r.kt)("inlineCode",{parentName:"p"},"mkdir")," command below which will create the folders shown:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"mkdir -p ~/workspace/pn/visitlocal/keystore\n")),(0,r.kt)("p",null,"Copy the dev wallet key and arweave key from the pointnetwork repository into the ",(0,r.kt)("inlineCode",{parentName:"p"},"keystore")," directory that you created in the previous step."),(0,r.kt)("p",null,"Run the ",(0,r.kt)("inlineCode",{parentName:"p"},"cp")," command below. This assumes that you are currently in the cloned pointnetwork repository folder and you have already created the 'keystore' folder in the location specified earlier. Feel free to change this according to your system:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"cp resources/blockchain-test-key2.json ~/workspace/pn/visitlocal/keystore/key.json\ncp resources/arweave-test-key2.json ~/workspace/pn/visitlocal/keystore/arweave.json\n")),(0,r.kt)("p",null,"Create a ",(0,r.kt)("inlineCode",{parentName:"p"},"visitlocal.yaml")," config file and save it in the pointnetwork repo ",(0,r.kt)("inlineCode",{parentName:"p"},"config")," directory. NOTE: This file is ignored by the ",(0,r.kt)("inlineCode",{parentName:"p"},"gitignore")," file automatically so do not commit this!"),(0,r.kt)("p",null,"Below is an example, You would only need to change ",(0,r.kt)("inlineCode",{parentName:"p"},"datadir")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"wallet.keystore_path")," values if you have created your profile in a different directory to what is specified:"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"NOTE"),": You may need to replace the tilde (~) in the directory path below and expand that to the full path, so on a Mac this would be ",(0,r.kt)("inlineCode",{parentName:"p"},"/Users/YOUR_USERNAME/pn/visitlocal")," etc."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"NOTE"),": You can change ",(0,r.kt)("inlineCode",{parentName:"p"},"zappsdir")," to any directory on your computer so that it points to the location where you have all your own personal Zapps that you are developing."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"datadir: ~/workspace/pn/visitlocal\nzappsdir: ../zapps\nwallet:\n  keystore_path: ~/workspace/pn/visitlocal/keystore\nmode: zappdev\nlog:\n  sendLogs: false\n  level: debug\nstorage:\n  arweave_host: localhost\n  arweave_protocol: http\n  arweave_port: 1984\n  use_arweave_bundler: false\n  use_arlocal: true\n  arweave_gateway_url: http://localhost:1984/graphql\nnetwork:\n  web3: http://localhost:7545\napi:\n  address: 127.0.0.1\n  port: 24682\nzproxy:\n  host: 127.0.0.1\n  port: 65502\n")),(0,r.kt)("p",null,"Create a profile in Firefox called ",(0,r.kt)("inlineCode",{parentName:"p"},"website_visitor")," that has a proxy set to route all http / https traffic to ",(0,r.kt)("inlineCode",{parentName:"p"},"localhost:65502")," (",(0,r.kt)("strong",{parentName:"p"},"note")," you can see this matches the zproxy config set in the ",(0,r.kt)("inlineCode",{parentName:"p"},"visitlocal.yaml")," file defined above). Don't forget to add the ",(0,r.kt)("a",{parentName:"p",href:"/docs/build-zapp-dev-environment-docker#create-a-point-network-profile-in-firefox"},"Point Network CA certificate")," to the new profile in Firefox. "),(0,r.kt)("h2",{id:"run-the-visitor-point-node"},"Run the Visitor Point Node"),(0,r.kt)("p",null,"The above setup steps for configuring ",(0,r.kt)("inlineCode",{parentName:"p"},"visitlocal")," only need to be performed once. Going forward you can start a Point Node using:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"npm i\npoint-visit\n")),(0,r.kt)("p",null,"Open a local Point Browser that connects to the Visitor Point Node proxy running on port 65502."),(0,r.kt)("p",null,"NOTE: This has to be run from within the cloned ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/pointnetwork/pointsdk"},"PointSDK repo")," folder which you will have already setup according to the instructions ",(0,r.kt)("a",{parentName:"p",href:"/docs/build-zapp-dev-environment-docker#create-a-point-network-profile-in-firefox"},"here"),"."),(0,r.kt)("p",null,"Run the command below which assumes that you already have created the ",(0,r.kt)("inlineCode",{parentName:"p"},"website_visitor")," profile as stated earlier:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"point-browser-visitor\n")),(0,r.kt)("p",null,"You should now be able to interact with any Zapps that have been deployed. As mentioned this is useful for Zapps that required interacting between two Identities such as the email zapp. I encourage you to try it!"),(0,r.kt)("h1",{id:"optional-start-a-hardhat-console"},"(Optional) Start a Hardhat console"),(0,r.kt)("p",null,"If you want to start a hardhat console:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"npx hardhat console --network development\n")),(0,r.kt)("p",null,"Then you can interact with the deployed Point contracts, for example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"identity = await ethers.getContractAt(\"identity\", \"0xD61e5eFcB183418E1f6e53D0605eed8167F90D4d\")\nawait identity.ikvGet('blog', 'zweb/contracts/address/Blog')\n")))}u.isMDXComponent=!0}}]);