"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[551],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return m}});var o=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=o.createContext({}),p=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},d=function(e){var t=p(e.components);return o.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},c=o.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),c=p(n),m=i,h=c["".concat(s,".").concat(m)]||c[m]||u[m]||a;return n?o.createElement(h,r(r({ref:t},d),{},{components:n})):o.createElement(h,r({ref:t},d))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,r=new Array(a);r[0]=c;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,r[1]=l;for(var p=2;p<a;p++)r[p]=n[p];return o.createElement.apply(null,r)}return o.createElement.apply(null,n)}c.displayName="MDXCreateElement"},3343:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return p},toc:function(){return d},default:function(){return c}});var o=n(83117),i=n(80102),a=(n(67294),n(3905)),r=["components"],l={id:"build-build-with-point-network",title:"Point Network Builders Starter's Guide",sidebar_label:"Point Network Builders Starter's Guide",slug:"../build-build-with-point-network"},s=void 0,p={unversionedId:"build/build-build-with-point-network",id:"build/build-build-with-point-network",title:"Point Network Builders Starter's Guide",description:"Welcome to the builder's section of the Point Network Wiki.",source:"@site/docs/build/build-build-with-pointnetwork.md",sourceDirName:"build",slug:"/build-build-with-point-network",permalink:"/docs/build-build-with-point-network",editUrl:"https://github.com/pointnetwork/pointnetwork.github.io/edit/main/website/docs/build/build-build-with-pointnetwork.md",tags:[],version:"current",lastUpdatedBy:"Darren Jensen",lastUpdatedAt:1648451129,formattedLastUpdatedAt:"3/28/2022",frontMatter:{id:"build-build-with-point-network",title:"Point Network Builders Starter's Guide",sidebar_label:"Point Network Builders Starter's Guide",slug:"../build-build-with-point-network"},sidebar:"pnSidebar",previous:{title:"Point Network Environments",permalink:"/docs/build-environments"},next:{title:"Testing Guide",permalink:"/docs/build-testing-guide"}},d=[{value:"Installing Docker",id:"installing-docker",children:[{value:"Versions",id:"versions",children:[],level:3},{value:"Install Docker Engine on Mac, Linux and Windows",id:"install-docker-engine-on-mac-linux-and-windows",children:[],level:3},{value:"Install Docker Compose as a plugin on Ubuntu",id:"install-docker-compose-as-a-plugin-on-ubuntu",children:[],level:3},{value:"Run Docker without using sudo on Ubuntu",id:"run-docker-without-using-sudo-on-ubuntu",children:[],level:3},{value:"Develop using docker compose",id:"develop-using-docker-compose",children:[],level:3},{value:"Troubleshooting the deployment",id:"troubleshooting-the-deployment",children:[],level:3},{value:"Open the deployed site in Point Browser",id:"open-the-deployed-site-in-point-browser",children:[],level:3},{value:"Create a Point Network Profile in Firefox",id:"create-a-point-network-profile-in-firefox",children:[],level:3},{value:"Open the deployed site in a second Point Browser",id:"open-the-deployed-site-in-a-second-point-browser",children:[],level:3},{value:"Next steps",id:"next-steps",children:[],level:3},{value:"Coding style",id:"coding-style",children:[],level:3}],level:2}],u={toc:d};function c(e){var t=e.components,l=(0,i.Z)(e,r);return(0,a.kt)("wrapper",(0,o.Z)({},u,l,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Welcome to the builder's section of the Point Network Wiki."),(0,a.kt)("h2",{id:"installing-docker"},"Installing Docker"),(0,a.kt)("p",null,"This setup requires Docker installed. We will not go into the details here as there are several resources online that can help. The important things are to install the correct versions to be able to run ",(0,a.kt)("inlineCode",{parentName:"p"},"docker")," without using ",(0,a.kt)("inlineCode",{parentName:"p"},"sudo")," and to have the ",(0,a.kt)("inlineCode",{parentName:"p"},"docker compose")," sub command available."),(0,a.kt)("h3",{id:"versions"},"Versions"),(0,a.kt)("p",null,"If you already have Docker and Docker Compose installed, confirm that the versions are the following (or higher). Check against these versions below:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"docker --version\n>> Docker version 20.10.12, build e91ed57\n\ndocker compose version\n>> Docker Compose version v2.2.3\n")),(0,a.kt)("h3",{id:"install-docker-engine-on-mac-linux-and-windows"},"Install Docker Engine on Mac, Linux and Windows"),(0,a.kt)("p",null,"Please follow the official ",(0,a.kt)("a",{parentName:"p",href:"https://docs.docker.com/engine/install/"},"Docker installation instructions"),"."),(0,a.kt)("h3",{id:"install-docker-compose-as-a-plugin-on-ubuntu"},"Install Docker Compose as a plugin on Ubuntu"),(0,a.kt)("p",null,"If you are running Linux (Ubuntu) and do not have the ",(0,a.kt)("inlineCode",{parentName:"p"},"docker compose")," command available after installing docker then following ",(0,a.kt)("a",{parentName:"p",href:"https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-compose-on-ubuntu-20-04"},"these instructions"),"."),(0,a.kt)("h3",{id:"run-docker-without-using-sudo-on-ubuntu"},"Run Docker without using sudo on Ubuntu"),(0,a.kt)("p",null,"If you want to avoid typing sudo whenever you run the docker command, add your username to the docker group:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"sudo usermod -aG docker ${USER}\n")),(0,a.kt)("p",null,"To apply the new group membership, log out of the server and back in, or type the following:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"su - ${USER}\n")),(0,a.kt)("p",null,"More details in ",(0,a.kt)("a",{parentName:"p",href:"https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-on-ubuntu-20-04"},"this article"),"."),(0,a.kt)("h3",{id:"develop-using-docker-compose"},"Develop using docker compose"),(0,a.kt)("p",null,"First add some aliases and functions to your local bash environment. The project comes with a ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/pointnetwork/pointnetwork/blob/develop/.bash_alias"},(0,a.kt)("inlineCode",{parentName:"a"},".bash_alias"))," file that contains a set of aliases that are useful for this project. The quickest way to add these alias to your terminal session is to run ",(0,a.kt)("inlineCode",{parentName:"p"},"source .bash_alias"),"."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Recommended")," You can also copy the contents of the ",(0,a.kt)("inlineCode",{parentName:"p"},".bash_alias")," into your ",(0,a.kt)("inlineCode",{parentName:"p"},"~/.bash_profile")," file and then run ",(0,a.kt)("inlineCode",{parentName:"p"},"source ~/.bash_profile")," that way these alias commands ",(0,a.kt)("strong",{parentName:"p"},"will be available in every terminal session")," going forward."),(0,a.kt)("p",null,"Clone the pointnetwork repo, cd into and install deps like so:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"git clone git@github.com:pointnetwork/pointnetwork.git\ncd pointnetwork\nnvm use\nnpm i\nnpm run build\n")),(0,a.kt)("p",null,"Next, copy the ",(0,a.kt)("em",{parentName:"p"},".env.e2e.example")," file to ",(0,a.kt)("em",{parentName:"p"},".env.e2e"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"cp .env.zappdev.example .env.zappdev\n")),(0,a.kt)("p",null,"You need to build a local Docker image to use. Ensure you are on the branch you want to work from and run the following command to build your new Docker image. NOTE: You may need to wait a few minutes for the image build to complete!"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"build-image\n")),(0,a.kt)("p",null,"With the above out of the way, run the following commands to install package dependencies for the Zapp you are working on."),(0,a.kt)("p",null,"NOTE: Since PointSocial Zapp uses React JS we need to make sure that the site is built locally first. For other Zapps you can check if dependencies are required and you only need to run ",(0,a.kt)("inlineCode",{parentName:"p"},"npm i"),". For example in ",(0,a.kt)("inlineCode",{parentName:"p"},"email.z")," there is a dev dependency required that needs to be installed before running the node."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"cd example/pointsocial.z\nnpm i\nnpm run build       <-- only needed for building Zapps that use frontend libraries like React JS\n")),(0,a.kt)("p",null,"In one terminal start all the services and watch the ",(0,a.kt)("inlineCode",{parentName:"p"},"point_node")," logs (NOTE: run these commands ",(0,a.kt)("em",{parentName:"p"},"from the root")," of the cloned pointnetwork repo!)"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"dclean\npoint-zappdev up -d\npoint-zappdev logs -f point_node\n")),(0,a.kt)("p",null,"In another terminal (to connect to the ",(0,a.kt)("inlineCode",{parentName:"p"},"point_node")," node and deploy the site )"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"dexec point_node\n./scripts/deploy-sites.sh pointsocial.z --contracts\n")),(0,a.kt)("p",null,"The site should deploy successfully after a few minutes."),(0,a.kt)("h3",{id:"troubleshooting-the-deployment"},"Troubleshooting the deployment"),(0,a.kt)("p",null,"If you see the following error:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"Error: Could not find contract dependency, have you tried npm install?\n")),(0,a.kt)("p",null,"Then it's likely that the Zapp you are attempting to deploy is missing dependencies required for the deployment or for the runtime. To fix this, it's best to stop the Point Node running, install the Zapp dependencies using ",(0,a.kt)("inlineCode",{parentName:"p"},"npm i")," and then restart the node and try again."),(0,a.kt)("p",null,"If you see the following error:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"Error: >>>>>>>>>>>>>>>>>>>>>>>> SOLIDITY COMPILATION ERRORS <<<<<<<<<<<<<<<<<<<<<<<<\nInternal exception in StandardCompiler::compile: /solidity/libsolidity/interface/CompilerStack.cpp(104): Throw in function solidity::frontend::CompilerStack::CompilerStack(ReadCallback::Callback)\nDynamic exception type: boost::wrapexcept<solidity::langutil::InternalCompilerError>\nstd::exception::what: You shall not have another CompilerStack aside me.\n[solidity::util::tag_comment*] = You shall not have another CompilerStack aside me.\n")),(0,a.kt)("p",null,"... then it is usually due to installing dependencies after the Point Node has started. A simple restart of the Point Node should fix this."),(0,a.kt)("h3",{id:"open-the-deployed-site-in-point-browser"},"Open the deployed site in Point Browser"),(0,a.kt)("p",null,"First create two profiles in Firefox to be able to test connecting to the different nodes quickly and easily. I suggest creating two profiles matching the names of the profiles set in your bash alias as mentioned above. NOTE: these profiles only need to be created once."),(0,a.kt)("h3",{id:"create-a-point-network-profile-in-firefox"},"Create a Point Network Profile in Firefox"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Create a new Profile by navigating to ",(0,a.kt)("inlineCode",{parentName:"li"},"about:profiles")," in Firefox.")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},(0,a.kt)("img",{alt:"alt-text",src:n(58969).Z}))))),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"Enter the profile name in the wizard")),(0,a.kt)("p",null,"Note we need to create two profiles so set the name to the profile you are currently creating"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"website_owner_docker")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"website_visitor_docker"))),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},(0,a.kt)("img",{alt:"alt-text",src:n(38180).Z}))))),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},"Configure the proxy for the specific profile")),(0,a.kt)("p",null,"Note each profile that you are creating requires a specific proxy setting. Please configure as shown below based on the profile you are currently adding:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Profile ",(0,a.kt)("inlineCode",{parentName:"li"},"website_owner_docker")," : set proxy to ",(0,a.kt)("inlineCode",{parentName:"li"},"localhost:65501")),(0,a.kt)("li",{parentName:"ul"},"Profile ",(0,a.kt)("inlineCode",{parentName:"li"},"website_visitor_docker")," : set proxy to ",(0,a.kt)("inlineCode",{parentName:"li"},"localhost:65502"))),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},(0,a.kt)("img",{alt:"alt-text",src:n(43345).Z}))))),(0,a.kt)("ol",{start:4},(0,a.kt)("li",{parentName:"ol"},"Import ",(0,a.kt)("strong",{parentName:"li"},"and trust")," the Point Network CA Certificate")),(0,a.kt)("p",null,"Note the Point Network CA certificate is located in the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/pointnetwork/pointnetwork/tree/develop/resources/certs"},(0,a.kt)("inlineCode",{parentName:"a"},"resources/certs"))," directory."),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},(0,a.kt)("img",{alt:"alt-text",src:n(28954).Z}))))),(0,a.kt)("p",null,"Now clone the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/pointnetwork/pointsdk"},"PointSDK")," repo into a ",(0,a.kt)("em",{parentName:"p"},"separate directory"),", cd into it, use the correct node version, install web-ext and run the ",(0,a.kt)("inlineCode",{parentName:"p"},"point-browser-owner")," alias command like so:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"git clone git@github.com:pointnetwork/pointsdk.git\ncd pointsdk\nnvm use\nnpm i -g web-ext\npoint-browser-owner\n")),(0,a.kt)("p",null,"This should open the Point Browser with the ",(0,a.kt)("inlineCode",{parentName:"p"},"website_owner_docker")," profile already configured to connect to the ",(0,a.kt)("inlineCode",{parentName:"p"},"point_node")," node and open ",(0,a.kt)("a",{parentName:"p",href:"https://point"},"https://point"),". Now you can navigate to ",(0,a.kt)("a",{parentName:"p",href:"https://point/identities"},"https://point/identities")," and you should see the deployed pointsocial.z zapp listed, You can open it from there."),(0,a.kt)("h3",{id:"open-the-deployed-site-in-a-second-point-browser"},"Open the deployed site in a second Point Browser"),(0,a.kt)("p",null,"To test out interacting between different Point Network identities we can open another Point Browser, for example the ",(0,a.kt)("inlineCode",{parentName:"p"},"website_visitor")," like so (from the root of the pointsdk repo):"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"cd pointsdk\npoint-browser-visitor\n")),(0,a.kt)("p",null,"If you have added the above command as an alias and you have set up the Firefox profile you should see a new browser open that is connected to the ",(0,a.kt)("inlineCode",{parentName:"p"},"website_visitor")," node. You can now post messages between each other on pointsocial!"),(0,a.kt)("h3",{id:"next-steps"},"Next steps"),(0,a.kt)("p",null,"Try to deploy the ",(0,a.kt)("inlineCode",{parentName:"p"},"store.z")," app. To do so its just a matter of:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Install the deps in store.z ",(0,a.kt)("inlineCode",{parentName:"li"},"cd example/store.z && npm i")),(0,a.kt)("li",{parentName:"ol"},"Build the store.z site ",(0,a.kt)("inlineCode",{parentName:"li"},"cd example/store.z && npm run build")),(0,a.kt)("li",{parentName:"ol"},"Tear down all the services (from the project root) ",(0,a.kt)("inlineCode",{parentName:"li"},"point-zappdev down")),(0,a.kt)("li",{parentName:"ol"},"Clean all Docker containers and volumes ",(0,a.kt)("inlineCode",{parentName:"li"},"dclean")),(0,a.kt)("li",{parentName:"ol"},"Bring up all the services (from the project root) ",(0,a.kt)("inlineCode",{parentName:"li"},"point-zappdev up -d")),(0,a.kt)("li",{parentName:"ol"},"Connect back into the ",(0,a.kt)("inlineCode",{parentName:"li"},"point_node")," running container: ",(0,a.kt)("inlineCode",{parentName:"li"},"dexec point_node")),(0,a.kt)("li",{parentName:"ol"},"Deploy store.z: ",(0,a.kt)("inlineCode",{parentName:"li"},"./scripts/deploy-sites.sh store.z --contracts")),(0,a.kt)("li",{parentName:"ol"},"Open a Point Browser instance to ",(0,a.kt)("a",{parentName:"li",href:"https://store.z"},"https://store.z"))),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Docker Compose Logs")),(0,a.kt)("p",null,"To follow the logs of ",(0,a.kt)("em",{parentName:"p"},"all")," the containers simply run ",(0,a.kt)("inlineCode",{parentName:"p"},"point-zappdev logs -f")," in the terminal. If you want to follow the logs of a specific container, then specify the service name as well like so: ",(0,a.kt)("inlineCode",{parentName:"p"},"point-zappdev logs -f point_node")," (to follow the logs of ",(0,a.kt)("inlineCode",{parentName:"p"},"point_node"),")"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Docker Compose and Truffle Console")),(0,a.kt)("p",null,"Since the ",(0,a.kt)("inlineCode",{parentName:"p"},"blockchain_node")," service is exposed via ",(0,a.kt)("inlineCode",{parentName:"p"},"http://localhost:7545")," its therefore possible to use the truffle console without any modification."),(0,a.kt)("p",null,"Therefore, ",(0,a.kt)("em",{parentName:"p"},"from the root")," of the cloned pointnetwork repo, you can run:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"}," cd truffle\n truffle console\n")),(0,a.kt)("p",null," The above will connect to the running Ganache blockchain in the Docker ",(0,a.kt)("inlineCode",{parentName:"p"},"blockchain_node")," service."),(0,a.kt)("p",null," ",(0,a.kt)("strong",{parentName:"p"},"Docker complete database reset")),(0,a.kt)("p",null," There is a simple command in the alias list above that will tear down all services, remove orphaned containers and remove all volumes. ",(0,a.kt)("em",{parentName:"p"},"Only run this command if you are ok with it clearing out your Docker volumes etc"),". Check the alias for its exact functionality. The command run is:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"dclean\n")),(0,a.kt)("h3",{id:"coding-style"},"Coding style"),(0,a.kt)("p",null,"Following coding style applies:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Always use semicolons otherwise ",(0,a.kt)("a",{parentName:"li",href:"https://www.freecodecamp.org/news/codebyte-why-are-explicit-semicolons-important-in-javascript-49550bea0b82/"},"dragons may bite you"),"!"),(0,a.kt)("li",{parentName:"ul"},"Use 4 spaces as a default indent for all files and set this in your IDE.")))}c.isMDXComponent=!0},58969:function(e,t,n){t.Z=n.p+"assets/images/1-add-new-firefox-profile-37c9724cacb8bb077c42f710747e9d5a.png"},38180:function(e,t,n){t.Z=n.p+"assets/images/2-add-new-firefox-profile-d0f909ab81b02c40288e68aceafe1c41.png"},43345:function(e,t,n){t.Z=n.p+"assets/images/3-config-firefox-proxy-77d6597a9d4b90c4270ad8fc0e4ba032.png"},28954:function(e,t,n){t.Z=n.p+"assets/images/4-import-ca-firefox-adef8a87b936b2642220e83709135062.png"}}]);