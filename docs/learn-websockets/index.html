<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css">
<script src="https://buttons.github.io/buttons.js"></script>
<script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script src="../js/custom.js"></script><title data-react-helmet="true">Web Sockets | Point Network</title><meta data-react-helmet="true" property="og:url" content="https://pointnetwork.github.io/docs/learn-websockets"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Web Sockets | Point Network"><meta data-react-helmet="true" name="description" content="WebSocket Endpoints"><meta data-react-helmet="true" property="og:description" content="WebSocket Endpoints"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://pointnetwork.github.io/docs/learn-websockets"><link data-react-helmet="true" rel="alternate" href="https://pointnetwork.github.io/docs/learn-websockets" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://pointnetwork.github.io/docs/learn-websockets" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.16394c40.css">
<link rel="preload" href="/assets/js/runtime~main.096bd991.js" as="script">
<link rel="preload" href="/assets/js/main.b9829200.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/pointlogo.png" alt="Point Network" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/pointlogowhite.png" alt="Point Network" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Point Network</b></a><a class="navbar__item navbar__link" href="/docs/getting-started">Getting Started</a><a class="navbar__item navbar__link" href="/docs/learn-index">Learn</a><a class="navbar__item navbar__link" href="/docs/build-index">Build</a><a class="navbar__item navbar__link" href="/docs/maintain-index">Maintain</a><a class="navbar__item navbar__link" href="/docs/use-index">Use</a><a class="navbar__item navbar__link" href="/api/">API</a></div><div class="navbar__items navbar__items--right"></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">General</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Learn</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn-index">Learner&#x27;s Portal</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Basics</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn-architecture">Architecture</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn-storage-layer">Storage Layer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn-point-deployer">Point Deployer</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/learn-websockets">Web Sockets</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/filecoin-vs-pointstorage">Filecoin vs Point Storage</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Advanced</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Cryptography</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn-video-tutorials">Video Tutorials</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Build</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Maintain</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Use</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">Web Sockets</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="websocket-endpoints"></a>WebSocket Endpoints<a class="hash-link" href="#websocket-endpoints" title="Direct link to heading">#</a></h2><p>The Point Network node has two WebSocket endpoints defined:</p><ul><li><code>NodeSocketController</code> which is used for internal socket connections and is exposed on the Nodes internal API port.</li><li><code>ZProxySocketController</code> which is used for for handling ZApp websocket connections via the ZProxy API port.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="connecting-to-the-nodesocketcontroller"></a>Connecting to the NodeSocketController<a class="hash-link" href="#connecting-to-the-nodesocketcontroller" title="Direct link to heading">#</a></h3><p>This is exposed on the Nodes internal API port. The routes are defined in <a href="/ws_routes.js">ws_routes.js</a> and the endpoint is served using Fastify WebSockets. Its possible to try out this socket using the <code>WebSocket Test client</code> (see below for details).</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="using-the-websocket-test-client"></a>Using the WebSocket Test client<a class="hash-link" href="#using-the-websocket-test-client" title="Direct link to heading">#</a></h4><p>You can start the <code>WebSocket Test client</code> using the following at the terminal:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">node scripts/ws/clientTest.js</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Check out the terminal for details.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="connecting-to-the-zproxysocketcontroller"></a>Connecting to the ZProxySocketController<a class="hash-link" href="#connecting-to-the-zproxysocketcontroller" title="Direct link to heading">#</a></h3><p>This is exposed on the ZProxy API port. The connection is made via the ZApp domain root. For example, if the ZApp domain is <code>example.z</code> then the WebSocket connection can be made at <code>wss://example.z</code>. See the <a href="/docs/example/hello.z">hello.z</a> demo app for examples.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="websocket-request-messages"></a>WebSocket Request Messages<a class="hash-link" href="#websocket-request-messages" title="Direct link to heading">#</a></h3><p>To issue a command via a WebSocket, send a payload request in this form:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{type: &#x27;&#x27;, params: &#x27;&#x27;}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Where <code>type</code> is the command type and <code>params</code> are the command parameters.</p><p>For example, to subscribe to a Smart Contract event via the <code>ZProxySocketController</code> send the following payload:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{type: &#x27;subscribeContractEvent&#x27;, params: {contract: &#x27;&#x27;, event: &#x27;&#x27;}}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Where <code>subscribeContractEvent</code> is the command type for subscribing to Smart Contract events and the <code>params</code> contains an object with the keys <code>contract</code> that specifies the contract name and <code>event</code> that specifies the name of the event to subscribe to.</p><p>For example, to subscribe to the <code>ProductSoldEvent</code> in the <code>Store</code> Smart Contract of the <code>store.z</code> app, you would issue the following command to the already connected websocket (via <code>wss://store.z</code>):</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{ type: &#x27;subscribeContractEvent&#x27;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  params: {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    contract: &#x27;Store&#x27;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    event: &#x27;ProductSoldEvent&#x27;}</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="websocket-response-messages"></a>WebSocket Response Messages<a class="hash-link" href="#websocket-response-messages" title="Direct link to heading">#</a></h3><p>Messages sent from the Node socket to the client will always echo the original command object (containing the <code>type</code> and <code>params</code> keys) that was used to initiate the call or the subscripton. The payload will also contain three other keys: <code>data</code> (containing the acutal response data from the call or subscription), <code>event</code> (denotes if this is data from the call or a message from the socket related to the command) and <code>hostname</code> (the hostname / domain of the app that requested this message).</p><p>Essentially there will be three event types of response message to handle:</p><ul><li><code>SUBSCRIBED_EVENT</code> - sent when a subscription command has successfully SUBSCRIBED</li><li><code>UNSUBSCRIBED_EVENT</code> - sent when a subscription command has successfully UNSUBSCRIBED</li><li><code>DATA_EVENT</code> - sent when there is an event emitted on the subscribed subscription or a call is returning data</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="subscribed_event-payload"></a>SUBSCRIBED_EVENT payload<a class="hash-link" href="#subscribed_event-payload" title="Direct link to heading">#</a></h3><p>A <code>SUBSCRIBED_EVENT</code> occurs when subscription command has successfully subscribed, for example to a specific event on a smart contract. When this happens a message is returned to the client of event type <code>SUBSCRIBED_EVENT</code> so that the client application knows the subscription is sucessful.</p><p>For example, the response from subsribing to the <code>ProductSoldEvent</code> on the <code>Store</code> smart contract would be:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;hostname&quot;: &quot;store.z&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;type&quot;: &quot;subscribeContractEvent&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;params&quot;: {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;contract&quot;: &quot;Store&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;event&quot;: &quot;ProductSoldEvent&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;data&quot;: {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;subscriptionId&quot;: &quot;0xa&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;message&quot;: &quot;Subscribed to Store contract ProductSoldEvent events&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;event&quot;: &quot;SUBSCRIBED_EVENT&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Note that the original command payload is echod back (<code>type</code> and <code>params</code>), the <code>hostname</code> is set to that of the caller app domain (store.z) and that the <code>data</code> key contains an object with the actual <code>subscriptionId</code> associated with the subscription (keep that for unsubscribing later!) and a <code>message</code> key. The <code>event</code> is set to <code>SUBSCRIBED_EVENT</code>.</p><p>The client app can filter for its own hostname and for this type of event to react accordingly when the subscription is successfully established.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="unsubscribed_event-payload"></a>UNSUBSCRIBED_EVENT payload<a class="hash-link" href="#unsubscribed_event-payload" title="Direct link to heading">#</a></h3><p>A <code>UNSUBSCRIBED_EVENT</code> occurs when a subscription command has successfully unsubscribed to a specific subscription by id.  When this happens a message is returned to the client of event type <code>UNSUBSCRIBED_EVENT</code> so that the client application knows the subscription has been sucessfully removed.</p><p>For example, the response from unsubsribing to the <code>ProductSoldEvent</code> on the <code>Store</code> Smart Contract via the <code>subscriptionId</code> = <code>0xa</code> would be:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;hostname&quot;: &quot;store.z&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;type&quot;: &quot;removeSubscriptionById&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;params&quot;: {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;contract&quot;: &quot;Store&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;event&quot;: &quot;ProductSoldEvent&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;subscriptionId&quot;: &quot;0xa&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;data&quot;: {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;message&quot;: &quot;Unsubscribed from Store contract ProductSoldEvent events using subscription id 0xa&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;event&quot;: &quot;UNSUBSCRIBED_EVENT&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Note that the original command payload is echod back (<code>type</code> and <code>params</code>), the <code>hostname</code> is set to that of the caller app domain (store.z) and that the <code>data</code> key contains an object with a single <code>message</code> key. The <code>event</code> is set to <code>UNSUBSCRIBED_EVENT</code>.</p><p>The client app can filter for its own hostname and for this type of event to react accordingly when the subscription is successfully removed.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="data_event-payload"></a>DATA_EVENT payload<a class="hash-link" href="#data_event-payload" title="Direct link to heading">#</a></h3><p>A <code>DATA_EVENT</code> is sent when there is an event emitted on the subscribed subscription or a call is returning data. So this is the most common event type since its emitted when an event is emiited on the subsription.</p><p>For example, in the <code>Hello.z</code> example app, the client subscribes to the <code>UpdatedValue</code> event in the <code>Hello</code> Smart Contract. Since that event is defined in the Smart Contract as <code>event UpdatedValue(string oldValue, string newValue);</code> then the <code>data.returnValues</code> key of the message will contain an object with the keys <code>oldValue</code> and <code>newValue</code>. See an example payload message from the socket below:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;hostname&quot;: &#x27;hello.z&#x27;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;type&quot;: &quot;subscribeContractEvent&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;params&quot;: {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;contract&quot;: &quot;Hello&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;event&quot;: &quot;UpdatedValue&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;data&quot;: {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;logIndex&quot;: 0,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;transactionIndex&quot;: 0,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;transactionHash&quot;: &quot;0xf525ddb1069d66855137878c66fc66092005b1731557119880c0e552880fc3d8&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;blockHash&quot;: &quot;0x53d60db399b1d85e529d64f901729b5840230abdb9c01233db5bbc97bf4a6e75&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;blockNumber&quot;: 38,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;address&quot;: &quot;0xC986038239801F079336e6F69438aABC0eE46487&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;type&quot;: &quot;mined&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;removed&quot;: false,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;log_14c3a8ce&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;returnValues&quot;: {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;0&quot;: &quot;Hello from the Blockchain!&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;1&quot;: &quot;I will update the value now&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;oldValue&quot;: &quot;Hello from the Blockchain!&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;newValue&quot;: &quot;I will update the value now&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;event&quot;: &quot;UpdatedValue&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;signature&quot;: &quot;0x4ccb6d79c8056228aebdc79cd2e1894d9b4c61edabcac2abe454385b06302384&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;raw&quot;: {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;data&quot;: &quot;0x000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000008434f5649442d31390000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008434f5649442d3139000000000000000000000000000000000000000000000000&quot;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;topics&quot;: [</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;0x4ccb6d79c8056228aebdc79cd2e1894d9b4c61edabcac2abe454385b06302384&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      ]</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;event&quot;: &quot;DATA_EVENT&quot;</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Note that the original command payload is echod back (<code>type</code> and <code>params</code>), the <code>hostname</code> is set to that of the caller app domain (hello.z) and that the <code>data</code> key contains an object with the full smart contract event payload so that the client can use any of this available data. Mostly, in this case, the client will be interestedin the <code>returnValues</code> key which contains the keys of the event as defined in the smart contract (in this case <code>oldValue</code> and <code>newValue</code>). Finally, the <code>event</code> key is set to <code>DATA_EVENT</code> to denote that this message contains actual data from the subscriotion or call that was made via the WebSocket.</p><p>The client app can filter for this type of event to react accordingly when the subscription or call returns data that the client is interested in. See the <code>hello.z</code> demo application for examples of this.</p></div><footer class="row docusaurus-mt-lg"><div class="col"></div><div class="col lastUpdated_3DPF">Last updated on <b><time datetime="2021-08-27T01:59:56.000Z">8/27/2021</time></b> by <b>Darren Jensen</b></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/learn-point-deployer"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Point Deployer</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/filecoin-vs-pointstorage"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Filecoin vs Point Storage »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#websocket-endpoints" class="table-of-contents__link">WebSocket Endpoints</a><ul><li><a href="#connecting-to-the-nodesocketcontroller" class="table-of-contents__link">Connecting to the NodeSocketController</a></li><li><a href="#connecting-to-the-zproxysocketcontroller" class="table-of-contents__link">Connecting to the ZProxySocketController</a></li><li><a href="#websocket-request-messages" class="table-of-contents__link">WebSocket Request Messages</a></li><li><a href="#websocket-response-messages" class="table-of-contents__link">WebSocket Response Messages</a></li><li><a href="#subscribed_event-payload" class="table-of-contents__link">SUBSCRIBED_EVENT payload</a></li><li><a href="#unsubscribed_event-payload" class="table-of-contents__link">UNSUBSCRIBED_EVENT payload</a></li><li><a href="#data_event-payload" class="table-of-contents__link">DATA_EVENT payload</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">General</div><ul class="footer__items"><li class="footer__item"><a href="https://pointnetwork.io/page/about" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>About<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://pointnetwork.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>FAQ<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://pointnetwork.io/page/social" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Contact<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://pointnetwork.io/page/support" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Careers<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://pointnetwork.io/page/build" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Build<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Technology</div><ul class="footer__items"><li class="footer__item"><a href="https://pointnetwork.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Technology<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://docs.google.com/document/d/16bcqsnezTKnPyYI7g32gEkrmJE35z8U4Zj0lUUXXQDY/edit" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Whitepaper<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://pointnetwork.io/files/PointNetworkBrochure-c003.pdf" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Lightpaper<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://pointnetwork.github.io/docs/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Documentation<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://pointnetwork.io/page/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/pointnetwork" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCWZkr5qbQhmMtD4Zt374-FA" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://t.me/pointnetworkchat" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Telegram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/pointnetwork" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.reddit.com/r/pointnetwork/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Reddit<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/pointlogo.png" alt="" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/img/pointlogowhite.png" alt="" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></div><div class="footer__copyright">Copyright © 2021 Point Network Limited</div></div></div></footer></div>
<script src="/assets/js/runtime~main.096bd991.js"></script>
<script src="/assets/js/main.b9829200.js"></script>
</body>
</html>